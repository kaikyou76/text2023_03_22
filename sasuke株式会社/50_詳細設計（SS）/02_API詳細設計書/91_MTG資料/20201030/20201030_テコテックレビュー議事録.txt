2020/10/30 テコテックSSレビュー

■保険商品チェックAPI

・独自実装①
合計値のしきい値は200万以上？
→200万円超過はエラーなので、200万はOKとします。（テコ　佐藤）

・独自実装②
ここも合計値は20万を超えた場合？

・定期に先進医療特約が見受けられない
→確認する（サスケ　宿題）
→定期には、３大疾病保険料払込免除特約しかない。（サスケ　佐藤）

詳細なエラーについては独自のエラーコードを割り当てる。（テコ　川人）



■保険商品設計API（テコ　飯田）

年齢と性別を組み合わせたキーでElastiCacheで持つことができそう。

プランIDをキーにする


・プランが更新されるタイミングはElastiCacheへの更新はどうするか？（テコ　川人）
→有効なCSVを識別するためのプランIDが必要なのではないか。（テコ　川人）
→


有効期限が切れたらElastiCacheを更新しなければならなくなる？

ElastiCache？テーブル管理？
→テーブルからとってくる想定（石井）

ElasticacheについてもプランIDごとにデータを持っている。

汎用項目の中に主契約、特約の内容が入ってくるのか？
→その認識でOK（石井）

主契約と特約はjson形式で持つ想定。（石井）

プラン名、プラン詳細について、CSVに入ってきてほしい（石井）
→フロントTに確認する（サスケ　佐藤宿題）

加入傾向フラグについては、特約に対してつくものとなります。（サスケ　佐藤）
→承知しました。（テコ　飯田）


■保険料計算API（テコ　飯田）

変換ロジックの処理順番は考慮しておかないと。（石井）



・・・保険商品取得APIだけ名称考慮すればいいかもしれない。。



■AURA

プロダクトコード


<coverage>
主契約と特約の数分だけ存在する。


■告知完了

シーケンス図を別に作ってというオーダーは？（石井）
図ベースで説明できるようにしておいたほうが良い（石井）
→承知しました。（テコ　飯田）


机上でではなく、一通り動かしています？（石井）
→いただいたサンプルで一通り確認しています。（テコ　飯田）

8.2
セッションIDって使う？（石井）
→
トークン、ETagはヘッダーにあるはずなので、正しく記載してください。（石井）
→AURAのリクエスト通りに記載する（テコ　飯田）

告知回答はどうでしたっけ？
→告知回答は正しく記載している（テコ　飯田）

AURA周りのインターフェースについて、一通り確認して修正しておいてください。（石井）
→承知しました。（テコ　飯田）

告知完了252行目のところの記載っぷりに合わせてください。

clientName って？
→システム名の想定（テコ　飯田）
→課題にあげておきます。（テコ　飯田）


■コード値参照API

パラメータのコードIDをなくしてしまおうかと考えている。（石井）
→承知しました。（テコ　飯田）

職業を例にして、例を記載するようにしてほしい。


■申込更新API

個人ID新規登録時の発番方式は？
→オートインクリメントで（石井）
→一意制約に引っかからなければ大丈夫です。（石井）

テーブル定義書のID項目にオートインクリメントが入っていなかったので、（テコ　飯田）
→ID系はオートインクリメントにチェックを入れるようにする（サスケ　宿題）

トランザクション粒度は全体にかける認識です。（テコ　飯田）
→その認識です（石井）

主契約と特約については？（テコ　飯田）
→必要と思いますので、追加する（石井）宿題



■基幹系基盤API共通処理

ハッシュ値の登録が正しく行えなかった場合に。。。
→もう少し具体的に書いてほしい。
→並行する処理で更新が走って登録が行われなかった場合など。（石井）
→トランザクションチェックループについては説明を追記します。（テコ　飯田）


8
「予期せぬエラーなども上位処理へ戻さないでここで処理すること」とは？（石井）
→「確実にハッシュ値を削除するために」など、目的を書いてもらえればよいのではないか？（石井）
→承知しました。


・API ConnectもOpenID Connectについての記載を追記してください。（石井）
　アクセス管理の処理の仕組みを記載してください。（石井）
　→承知しました。（テコ　飯田）
　→接続方式ですが、http/2を使ってコネクション数をできるだけ減らすのどうかと言われている。
　　それは可能か？（石井）
　　→確認します。（テコ　宿題）


・コード値の運用について（テコ　川人）
→SE作業になる認識（石井）


■バッチ

バッチがエラーになったときの監視について、正常終了0、異常終了1としたい。
部分以上の場合は？
→コード体系的には0, 1で管理
エラーオブジェクトはjson形式で出力する想定（テコ　川人）
→jsonテキストにして監視することは可能か？
→そのへんを確認して、サスケインフラと認識合わせしたい（石井）
→ログから飛ばせるかどうか？

大きな問題が発生しなければ、次回に実行するような運用で行きたい。（石井）
→どこまでAWSの仕組みの中でやってくれるのかなどは確認いただきたい。
　→承知しました。（テコ　川人）

























